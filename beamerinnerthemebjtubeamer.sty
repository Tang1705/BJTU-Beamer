%%
%% This is file `beamerinnerthemebjtubeamer.sty'
%%
%% ------------------------------------------------------------------------
%% Copyright (C) 2021,2022 Q.Tang
%% 
%% Licensed under the Apache License, Version 2.0 (the "License");
%% you may not use this file except in compliance with the License.
%% You may obtain a copy of the License at
%% 
%%     http://www.apache.org/licenses/LICENSE-2.0
%% 
%% Unless required by applicable law or agreed to in writing, software
%% distributed under the License is distributed on an "AS IS" BASIS,
%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%% See the License for the specific language governing permissions and
%% limitations under the License.
%% ------------------------------------------------------------------------

\mode<presentation>
\setbeamertemplate{background}{
  \begin{tikzpicture}
  \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  \iftoggle{tpage}{%Title Page
    %    \draw[fill=black] (0,0) rectangle(\the\paperwidth,\the\paperheight);
    %Background
    \node[anchor=south west, inner sep=0] at (\bjtutitlebackgroundmove) {\includegraphics[width=\the\paperwidth,height=\the\paperheight]{\bjtutitlebackground}};
    %Logo
    \node[anchor=north east, inner sep=0] at (\bjtutitlelogomove) {\includegraphics[height=\bjtutitlelogoheight]{\bjtutitlelogo}};
    %Logo_left
    \node[anchor=north east, inner sep=0] at (\bjtutitleleftlogomove) {\includegraphics[height=\bjtutitleleftlogoheight]{\bjtutitleleftlogo}};
    %Logo_right
    \node[anchor=north east, inner sep=0] at (\bjtutitlerightlogomove) {\includegraphics[height=\bjtutitlerightlogoheight]{\bjtutitlerightlogo}};
	\draw[color=\bjtuorange,thick] (1.5,6.2)--(8.5,6.2);

  }{
  	\iftoggle{cpage}{
  		
  	}{
  		\iftoggle{cover}{
  		
  		}{
  			\iftoggle{cover}{
  		
  			}{
  				%Inner Pages
    			%header Logo
    			\node[anchor=north east, inner sep=0] at (\the\paperwidth-4.5mm,\the\paperheight-2mm) {\includegraphics[height=8mm]{\bjtutoplogo}};
				\node[anchor=north east, inner sep=0] at (\the\paperwidth-153mm,\the\paperheight-2mm) {\includegraphics[height=6.5mm]{\bjtutitlerightlogo}};
				\node[anchor=north east, inner sep=0] at (\the\paperwidth-35.5mm,\the\paperheight-2mm) {\includegraphics[height=8mm]{\bjtutop}};
    			%side bar
	    		%\draw[draw=none,fill=\bjtusidecolor] (0,6mm)[rounded corners=.5mm] -- (4mm,6mm)[rounded corners=2mm] -- (4mm,\the\paperheight*0.80) -- (0,\the\paperheight*0.80);
    			\draw[color=\bjtuorange,thick] (1,0.5)--(15,0.5);
  			}
  		}
     }
  }
  
  \end{tikzpicture}
}

% Title page
\defbeamertemplate*{title page}{texsx}[1][]
{
   \vskip \dimexpr(\bjtutitlelogoheight+1mm)%
   \begin{beamercolorbox}[#1]{title page header}
   \usebeamerfont*{institution}~~~~~~~~~北京交通大学\bjtu@value@institution\bjtu@value@defense\par%
   \end{beamercolorbox}
   \vskip 5mm 
   \begin{beamercolorbox}[#1]{title page header}
      \usebeamerfont*{title}\centering\bjtu@value@title\par%
      \vskip 2mm
      \usebeamerfont*{englishtitle}\centering\bjtu@value@englishtitle\par%
    \end{beamercolorbox}%
    \vskip 0.25cm%
    \begin{beamercolorbox}[#1]{author}
      \usebeamerfont{author}~~~~~~~~~~~~~~~~~~答辩人：\bjtu@value@author~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~指导教师：\bjtu@value@advisor%
    \end{beamercolorbox}
     \vskip 0.25cm%
    \begin{beamercolorbox}[#1]{date}
      \usebeamerfont{author}~~~~~~~~~~~~~~~~~~学号：\bjtu@value@studentNumber~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~答辩时间：\insertdate%
    \end{beamercolorbox}
  \vfill
}

%headline
\setbeamertemplate{headline}{
\nottoggle{cpage}{
\nottoggle{cover}{
\nottoggle{backcover}{
\nottoggle{tpage}{\relax%
	 \leavevmode%
	\vskip 0.47cm
  \begin{beamercolorbox}[wd=.8\paperwidth,ht=2.5ex,dp=1.125ex]{section in head/foot}%
    \hspace{0.7cm}\fontsize{12}{48} \selectfont \insertsectionnavigationhorizontal{.5\paperwidth}{\hskip0pt plus1filll}{}%
  \end{beamercolorbox}%
}{}}{}}{}}{}
}


%footline
\setbeamertemplate{footline}{%
\nottoggle{cpage}{
\nottoggle{cover}{
\nottoggle{backcover}{
\nottoggle{tpage}{\relax%
    \vspace*{-0.4cm}
    \hspace{3em}%4mm
    \usebeamercolor[fg]{page number in head/foot}%
    \usebeamerfont{page number in head/foot}%
    \insertframenumber\,/\,\inserttotalframenumber\kern1em%
    \hspace{0.2cm}%
    \vspace*{.2cm}%
}{}}{}}{}}{}
}

\setbeamertemplate{section in toc}[sections numbered]
\setbeamertemplate{subsection in toc}{
\vskip 0.1cm
\leavevmode\leftskip=-4ex%
  \llap{\raisebox{0.1ex}{\textcolor{black}{$\bullet$}}\kern0.5ex}%
\inserttocsubsection\par%
}

\setbeamertemplate{frametitle}{%
	\begin{tikzpicture}
	\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
    \node[anchor=north east, inner sep=0] at ({\the\paperwidth-158mm,\the\paperheight-5mm}) {\includegraphics[height=\bjtutitleleftlogoheight]{./resources/vi/logo_left_blue.png}};
    \node[anchor=north east, inner sep=0] at ({\the\paperwidth-139mm,\the\paperheight-5mm}) {\insertframetitle};
    \end{tikzpicture}
	
}



\mode
<all>